<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>VCAA</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main>
      <header class="app-header">
        <h1 class="app-title">VCAA</h1>
      </header>

      <section class="card">
        <label class="input-group">
          <span class="input-label">Goal</span>
          <textarea
            id="transcript"
            rows="3"
            placeholder="Show me cheap flights from Istanbul to NYC on January 25"
          ></textarea>
        </label>

        <div class="button-group">
          <button id="run" class="btn btn-primary">
            <span class="btn-text">Start Task</span>
          </button>
          <button id="micToggle" type="button" class="btn btn-secondary" aria-live="polite">
            <span class="btn-text">Cancel</span>
          </button>
        </div>
      </section>

      <section class="card card-settings">
        <div class="settings-header" id="settingsToggle">
          <span class="settings-icon">‚öôÔ∏è</span>
          <span>Settings</span>
          <span class="chevron" id="settingsChevron">‚ñº</span>
        </div>

        <div class="settings-content" id="settingsContent">
          <label class="input-group">
            <span class="input-label">API Base</span>
            <input id="apiBase" type="text" placeholder="http://localhost:8081" />
          </label>

          <div class="security-row">
            <span
              id="connectionSecurityStatus"
              class="security-badge insecure"
              role="status"
              aria-live="polite"
            >
              <span class="security-icon">‚ö†Ô∏è</span>
              <span class="security-text">HTTP</span>
            </span>
            <label class="toggle-label">
              <input id="requireHttps" type="checkbox" class="toggle-input" />
              <span class="toggle-switch"></span>
              <span class="toggle-text">Require HTTPS</span>
            </label>
          </div>

          <div class="option-row">
            <label class="toggle-label">
              <input id="useAccessibilityTree" type="checkbox" class="toggle-input" />
              <span class="toggle-switch"></span>
              <span class="toggle-text">CDP Mode</span>
            </label>
            <span id="axModeStatus" class="info-badge" title="Uses Chrome DevTools Protocol for element interaction">?</span>
          </div>

          <label class="input-group">
            <span class="input-label">API Key</span>
            <div class="api-key-wrapper">
              <input
                id="apiKey"
                type="password"
                autocomplete="off"
                placeholder="Enter your API key"
              />
              <button id="toggleApiKeyVisibility" type="button" class="btn-icon-only" aria-pressed="false">
                <span id="apiKeyToggleIcon">üëÅÔ∏è</span>
              </button>
            </div>
            <span id="apiKeyStatus" class="status-text status-missing">Not configured</span>
          </label>
        </div>
      </section>

      <section class="card" id="clarificationCard" style="display: none;">
        <div class="section-header">
          <span>üí¨</span>
          <span>Clarification</span>
        </div>
        <div id="clarificationPanel" role="status" aria-live="polite"></div>
        <div id="clarificationHistory" class="clarification-history"></div>
        <button id="resetClarification" type="button" class="btn btn-ghost btn-sm">
          Reset clarifications
        </button>
      </section>

      <section class="card card-output">
        <div class="section-header">
          <span>üìã</span>
          <span>Output</span>
        </div>
        <pre id="output"></pre>
      </section>

      <section class="card card-debug">
        <div class="section-header">
          <span>üêû</span>
          <span>Debug</span>
          <button id="debugCopy" type="button" class="btn btn-ghost btn-sm">Copy</button>
        </div>
        <pre id="debugOutput" class="debug-output">No debug data yet.</pre>
      </section>

      <section class="card axrec-section" id="axrecSection">
        <div class="section-header">
          <span>üî¥</span>
          <span>Human AX Recording</span>
        </div>
        <div class="prompt-nav">
          <button id="humanPromptPrev" type="button" class="btn-icon-only" aria-label="Previous prompt">&larr;</button>
          <div id="humanPromptIndex" class="prompt-index">Prompt 1 of 200</div>
          <button id="humanPromptNext" type="button" class="btn-icon-only" aria-label="Next prompt">&rarr;</button>
        </div>
        <div class="prompt-card" id="humanPromptCard">
          <div class="prompt-label-row">
            <div class="prompt-label">Current prompt</div>
            <div id="humanPromptRecorded" class="prompt-tag" aria-hidden="true">Recorded</div>
          </div>
          <div id="humanPromptText" class="prompt-text"></div>
        </div>
        <div class="button-group">
          <button id="humanRecToggle" type="button" class="btn btn-secondary btn-sm">Start Recording</button>
        </div>
        <div id="humanRecStatus" class="recording-status">Recording: OFF | Tabs: 0</div>
      </section>
    </main>
    <script src="sidepanel.js"></script>
  </body>
</html>
